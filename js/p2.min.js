function culqi(){if(Culqi.token){var e=Culqi.token.id,a=Culqi.token.email;alert("Se ha creado un token:"+e),$.ajax({type:"POST",data:{token:e,amount:amount,amount_r:amount_r,descrp:descrp,email:a,us:us},dataType:"json",url:"/paymentProcess.php",beforeSend:function(){dialog=bootbox.dialog({centerVertical:!0,message:'<p class="text-center mb-0"><i class="fa fa-spin fa-cog"></i>Por favor, espere un momento...<img src="/images/Spinner-1s-73px.gif" title="Procesando..."/></p>',closeButton:!1})},complete:function(e,r){dialog.modal("hide")},success:function(e){var r="";console.log(e),e.constructor==String&&(r=JSON.parse(e)),e.constructor==Object&&(r=JSON.parse(JSON.stringify(e))),"charge"===r.object?($.ajax({type:"POST",data:{event:!0,item:item,amount:amount,amount_r:amount_r,email:e.email,descrp:descrp,us:us,code_reference:e.reference_code,code_auth:e.authorization_code},dataType:"json",url:"/postProcess.php",success:function(e){return!0}}),bootbox.alert({message:"<b>"+e.outcome.user_message+" </b> Codigo Autorizacion: "+e.reference_code+" <br>Revisar tu correo electronico",size:"small",centerVertical:!0,callback:function(){return window.location.replace("https://bauldepeliculas.info/"),!1}})):"error"===r.object?($.ajax({type:"POST",data:{event:!1,item:item,amount:amount,amount_r:amount_r,email:a,descrp:descrp,us:us,user_message:r.user_message,type:r.type,codigo_error:"0001",merchant_message:r.merchant_message},dataType:"json",url:"/postProcess.php",success:function(e){return!0}}),bootbox.alert({centerVertical:!0,message:"COD01 - Contactacte con nosotros y muestranos esta imagen, Hubo un problema con la transacción: "+r.user_message,size:"small"})):bootbox.alert({centerVertical:!0,message:"COD02 - Contactacte con nosotros y muestranos esta imagen,  Hubo un problema con la transacción: "+e,size:"small"})},error:function(e){bootbox.alert({centerVertical:!0,message:"COD03 - Contactacte con nosotros y muestranos esta imagen, Hubo un problema con la transacción: "+e,size:"small"})}})}else alert(Culqi.error.user_message)}$.extend($.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, llene este campo.",email:"Por favor, escriba un correo electrónico válido.",url:"Por favor, escriba una URL válida.",date:"Por favor, escriba una fecha válida.",dateISO:"Por favor, escriba una fecha (ISO) válida.",number:"Por favor, escriba un número válido.",digits:"Por favor, escriba sólo dígitos.",creditcard:"Por favor, escriba un número de tarjeta válido.",equalTo:"Por favor, escriba el mismo valor de nuevo.",extension:"Por favor, escriba un valor con una extensión permitida.",maxlength:$.validator.format("Por favor, no escriba más de {0} caracteres."),minlength:$.validator.format("Por favor, no escriba menos de {0} caracteres."),rangelength:$.validator.format("Por favor, escriba un valor entre {0} y {1} caracteres."),range:$.validator.format("Por favor, escriba un valor entre {0} y {1}."),max:$.validator.format("Por favor, escriba un valor menor o igual a {0}."),min:$.validator.format("Por favor, escriba un valor mayor o igual a {0}."),nifES:"Por favor, escriba un NIF válido.",nieES:"Por favor, escriba un NIE válido.",cifES:"Por favor, escriba un CIF válido."}),$.validator.setDefaults({highlight:function(e){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,r){r.parent(".input-group").length?e.insertAfter(r.parent()):e.insertAfter(r)}}),Culqi.settings({title:"Baul de Peliculas & Series",currency:"PEN",description:descrp,amount:amount}),$(document).ready(function(){$("form#processPaymentTwo").validate({rules:{cardNumber:{required:!0,creditcard:!0,minlength:13,maxlength:16},email:{required:!0,email:!0},exp_month:{required:!0,minlength:2,maxlength:2},exp_year:{required:!0,minlength:2,maxlength:2},cvv:{required:!0,minlength:3,maxlength:3}},messages:{email:"Ingresa un email valido"},submitHandler:function(){alert("entra?");$("form#processReview").serialize();Culqi.createToken(),e.preventDefault()}})});